# 第2章 轻松应对后续的变化

## 1 Spring的主流程

1. 根据设置的Class属性或者根据className来解析Class
2. 对override属性进行标记及验证
3. 应用初始化前的后处理器，解析指定的Bean是否存在初始化前的短路操作
4. 开启Bean的实例化

## 2 Spring的PostProcessor扩展点

- 解决无法判断实例化的Class，该Class可能通过Spring的cglib动态代理的一个接口动态生成的实例，可能就不需要进行后续的Class实例化、属性注入等动作。
- 设计思路：
    1. 抽象主流程：对需求进行深入理解，并对产品在未来一段时间内的变化有所预判，抽象出主流程和分支流程。
    2. 预留好扩展点：合理设计扩展点，以便应对后面的需求变更

## 3 确定需求后要做的事情

1. 思考项目的主流程是什么：仔细斟酌主流程和分支流程分别是什么，然后在设计层面体现出来
2. 扩展切入点怎么预留：在核心流程的前后都要预留好切入点
3. 扩展接口怎么定义：对于接口入参，扩展接口需要考虑当前上下文传递的数据接口的定义，对于接口出参，考虑返回的结果是否需要干预后续主流程的执行
4. 职责的拆分：考虑扩展逻辑的实现位置，以及抽取通用流程